<input class="selector-switch npc" name="attr_npcswitch" type="checkbox" value="1">
<input class="selector-switch gmroll" name="attr_gmrollswitch" type="checkbox" value="1">
<input class="selector-switch force" name="attr_forceswitch" type="checkbox" value="1">
<input class="selector-switch background" name="attr_backgroundswitch" type="checkbox" value="1">
<input class="selector-switch equipment" name="attr_equipmentswitch" type="checkbox" value="1">
<!-- 
<input class="selector-switch wild" name="attr_wildswitch" type="radio" value="wild" checked="true">
<input class="selector-switch nowild" name="attr_wildswitch" type="radio" value="nowild"> -->

<div class="master-container">
	<input class="main-options options-flag" type="checkbox" name="attr_options-flag"><span style="float:left">y</span>
	<div class="main-settings" style="height:1em;text-align:right;float:right"><h2>Settings</h2></div>
	<div class="main-container npc-hide right" style="position:absolute;right: 5px;top:-35px"><h2>Player Sheet</h2></div>
	<div class="main-container pc-hide right" style="position:absolute;right: 5px;top:-35px"><h2>NPC Sheet</h2></div>
	<div style="position:absolute;right: 5px;top:30px"><p class="version"> </p></div>
	<div style="display:inline-block;position:absolute;left: 150px;padding-bottom:50px"> <!-- header-->
		<img src="http://rs8.pbsrc.com/albums/a35/VPP3/d62_zpstllyo5ds.png?w=480&h=480&fit=clip" style="max-height: 50px;"/>
		<img src="http://a.dilcdn.com/bl/wp-content/uploads/sites/6/2012/11/sw_logo_lg_default-small.jpg" style="max-height: 80px;" title="This is where the fun begins."/>
		<img src="http://rs8.pbsrc.com/albums/a35/VPP3/d61_zps5ef1qprz.png?w=480&h=480&fit=clip" style="max-height: 50px;"/>
	</div>	
	<div class="main-settings container" style="padding-top:67px"><!-- Settings Menu-->
		<div class="section" style="width:850px">
			<!-- <div class="tdborder" style="float:right;width:45%;padding-left:10px">
				<label style="text-align:center">Recent Updates:</label>
				<p>⚫ simplified NPC added</p>
				<p>⚫ GM rolls added</p>
				<p>⚫ Hide options for few sections</p>
				<p>⚫ Equipment Section moved above Background Section</p>
			</div> -->
			<div class="input-row top-row bold"> 
				<span title="Shows a more dense statblock for NPCs. Equipment sections uses the first field from the PC version">Use NPC sheet <input name="attr_npcswitch" type="checkbox" value="1"></span>
				
			</div>
			<div class="input-row top-row bold">
				<span title="Hides the GM rolls. They are like regular rolls but whispered to the GM">Hide GM Rolls?</span>
				<input name="attr_gmrollswitch" type="checkbox" value="1">
			</div>
			<div class="input-row top-row bold">
				<span title="Useful for those who are not Force-sensitive">Hide Force Section? <input name="attr_forceswitch" type="checkbox" value="1"></span>
			</div>
			<div class="input-row top-row bold">
				<span>Hide Equipment Section? </span>
				<input name="attr_equipmentswitch" type="checkbox" value="1">
			</div>
			<div class="input-row top-row bold">
				<span>Hide Background Section? </span>
				<input name="attr_backgroundswitch" type="checkbox" value="1">
			</div>
		</div>
	</div>
<div class="main-container container" style="padding-top:75px">
		<div class="section npc-hide"> <!-- PC core info-->
			<div class="2colrow">
				<div class="col" style="display:inline-block;">
					<label class="toppad">Character Name <input class="right shorttext" type="text" name="attr_charactername" style="width:55%"/></label>
					<label class="toppad">Type <input class="right shorttext" type="text" name="attr_type" style="width:75%"/></label>
					<label class="toppad;">Species <input class="right shorttext" style="width:70%;" type="text" name="attr_species"/></label>
					<table style="margin-top:-10px; margin-left:-10px;">
						<tr>
							<td>
							<label class="toppad">Age <input  class="smalltext shorttext" type="text" name="attr_age"/></label>
							</td><td>
							<label>Height <input class="smalltext shorttext" type="text" name="attr_height"/></label>
							</td><td>
							<label>Weight <input class="smalltext shorttext" type="text" name="attr_weight"/></label>
							</td><td>
							<label>Gender <input class="mediumtext shorttext" type="text" name="attr_gender"/></label>
							</td>
						</tr>
					</table>
				</div>
				<div class="col">
					<label class="right">Credits <input type="number" min="0" class="credits" name="attr_credits" /></label>
					<label>Physical Description</label>
					<textarea name="attr_Physical_Description" style="height:6em;width:97%" ></textarea>
				</div>
			</div>
		</div>
		<div class="section npc-hide"> <!-- PC numbers -->
			<div class='3colrow'>
				<div class='col'>
					<label class="areaLabel">Special Abilities</label>
					<textarea name="attr_specialAbilities" style="width:95%;height:13em" ></textarea>
				</div>            
				<div class='col'>
					<label>Move <input type="number" name="attr_move" class="smallshortnumber" min="0" value="10"/></label>
					<label>Force Sensitive? 
						<select name="attr_forceSensitive" class="smallselect">
						  <option value="1">Yes</option>
						  <option value="0" selected="selected">No</option>
						</select> 
					</label>
					<label>Force Points <input type="number" name="attr_forcePoints" class="smallshortnumber" min="0" value="0"/></label> <!---On char creation everyone starts with 1 FP --->
					<label>Dark Side Points <input type="number" name="attr_darkSidePoints" class="smallshortnumber" min="0" value="0"/></label>
					<label>Character Points <input type="number" name="attr_characterPoints" class="smallshortnumber" min="0" value="0"/></label> <!---On char creation everyone starts with 5 CP --->
					<button class="d6-dice gmroll-hide" type="roll" name="rollg_customroll" value="/w gm &{template:black} {{name=?{Roll Name}}} {{Roll=[[{(?{Number of dice|0} - 1)d6cf0cs7 + ?{Number of pip|0},1d6!cf1cs6}]]}}"><span class="redtxt">(GM)</span>Custom Roll</button>
					<button class="d6-dice gmroll-hide" type="roll" name="rollg_extraroll" value="/w gm &{template:black} {{name=Extra Dice}} {{Roll=[[{?{Number of  extra dice|0}d6cf0cs7}]]}}"><span class="redtxt">(GM)</span>Extra Dice</button>
					<button class="d6-dice gmroll-hide" type="roll" name="rollg_charproll" value="/w gm &{template:black} {{name=Character points roll}} {{Roll=[[?{Number of char points to spend on roll|1|2|3|4|5}d6!cf0cs6]]}}"><span class="redtxt">(GM)</span>Char pt</button>
				</div>         
				<div class='col'>
					<label style="text-decoration:underline;">Wound Level
						<select name="attr_WoundLevel" class="mediumselect left" style="width:135px"/>
						  <option value="0" selected="selected">Healthy</option>
						  <option value="1">Stunned</option>
						  <option value="1">Wounded</option>
						  <option value="2">Wounded Twice</option>
						  <option value="5">Incapacitated</option> <!--You shouldn't even be able to make checks while incapacitated or Mortally wounded, hence -15. Later will include option to ignore wound penalties -->
						  <option value="5">Mortally Wounded</option>
						</select> 
					</label>
					<label>Initiative bonus
						<input type="number" name="attr_initiative" class="smallnumber shortnumber" min="0" value="0"/>D+<input type="number" name="attr_initiativepip" class="pipnumber shortnumber" min="0" max="2" value="0"/>
					</label>
					<button class="d6-dice" type="roll" name="roll_init" value="&{template:black} {{name=Initiative}} {{Roll=[[(@{perception} + @{initiative} -@{WoundMod} + @{Force_Up} + ?{Dice mods|0} -1)d6cf0cs7 + @{perceptionpip} + @{initiativepip} + ?{Other Mods(pip)|0} + 1d6!cf1cs6 &{tracker}]]}}">Initiative</button>
					<button class="d6-dice" type="roll" name="roll_customroll" value="&{template:black} {{name=?{Roll Name}}} {{Roll=[[{(?{Number of dice|0} - 1)d6cf0cs7 + ?{Number of pip|0},1d6!cf1cs6}]]}}">Custom Roll(no modifiers)</button>
					<button class="d6-dice" type="roll" name="roll_extraroll" value="&{template:black} {{name=Extra Dice}} {{Roll=[[{?{Number of  extra dice|0}d6cf0cs7}]]}}">Extra Dice(no wild die)</button>
					<button class="d6-dice" type="roll" name="roll_charproll" value="&{template:black} {{name=Character points roll}} {{Roll=[[?{Number of char points to spend on roll|1|2|3|4|5}d6!cf0cs6]]}}">Character points roll</button>
				</div>
			</div>
		</div>
		<div class="section pc-hide"> <!----------- NPC info block-->
			<div class="2colrow">
				<div class="col" style="display:inline-block;">
					<label class="toppad">NPC Name <input class="right shorttext" type="text" name="attr_charactername" style="width:65%"></label>
					<label style="text-decoration:underline;">Wound Level
						<select name="attr_WoundLevel" class="mediumselect left" style="width:135px"/>
						  <option value="0" selected="selected">Healthy</option>
						  <option value="1">Stunned</option>
						  <option value="1">Wounded</option>
						  <option value="2">Wounded Twice</option>
						  <option value="5">Incapacitated</option> <!--You shouldn't even be able to make checks while incapacitated or Mortally wounded, hence -15. Later will include option to ignore wound penalties -->
						  <option value="5">Mortally Wounded</option>
						</select> 
					</label>
					<label>Initiative bonus<input type="number" name="attr_initiative" class="smallnumber shortnumber" min="0" value="0">D+<input type="number" name="attr_initiativepip" class="pipnumber shortnumber" min="0" max="2" value="0"></label>
					<button class="d6-dice" type="roll" name="roll_init_n" value="&{template:black} {{name=Initiative}} {{Roll=[[(@{perception} + @{initiative} -@{WoundMod} + @{Force_Up} + ?{Dice mods|0} -1)d6cf0cs7 + @{perceptionpip} + @{initiativepip} + ?{Other Mods(pip)|0} + 1d6!cf1cs6 &{tracker}]]}}"/>Initiative</button>
					<button class="d6-dice" type="roll" name="roll_customroll_n" value="&{template:black} {{name=?{Roll Name}}} {{Roll=[[{(?{Number of dice|0} - 1)d6cf0cs7 + ?{Number of pip|0},1d6!cf1cs6}]]}}"/>Custom Roll(no mods)</button>
					<button class="d6-dice gmroll-hide" type="roll" name="rollg_customroll_n" value="/w gm &{template:black} {{name=?{Roll Name}}} {{Roll=[[{(?{Number of dice|0} - 1)d6cf0cs7 + ?{Number of pip|0},1d6!cf1cs6}]]}}"/><span class="redtxt">(GM)</span>C Roll</button>
				</div>
				<div class="col">
					<label>Physical Description & Other Info</label>
					<textarea name="attr_Physical_Description" style="height:6em;width:97%"></textarea>
				</div>
			</div>
		</div>
		<div class="section"> <!----------------------------------- Attributes&Skills -->
			<table>
				<tr>
					<td class="tdborder"><div class="bold"><!---Perc Attribute --->
							<button class="d6-dice" type='roll' name="roll_per" value='&{template:blue} {{name=Perception}} {{Roll=[[(@{perception} -@{WoundMod} +@{Force_Up} +?{Dice mods|0} -1)d6cf0cs7 +@{perceptionpip} +?{Other Mods(pip)|0} +1d6!cf1cs6]]}}' >Perception</button>
							<button class="d6-dice gmroll gmroll-hide" type='roll' name="rollg_per" value='/w gm &{template:blue} {{name=Perception}} {{Roll=[[(@{perception} -@{WoundMod} +@{Force_Up} +?{Dice mods|0} -1)d6cf0cs7 +@{perceptionpip} +?{Other Mods(pip)|0} +1d6!cf1cs6]]}}'><span class="redtxt">GM</span></button>
							<div style="float:right;">
								<input type="number" name="attr_perception" class="smallnumber"  min="1" value="3"/>D+<input type="number" name="attr_perceptionpip" class="pipnumber" min="0" max="2" value="0"/>
							</div>
						</div>
						<fieldset class="repeating_perckills"> <!---Perc Skills --->
							<button class="d6-dice"  type="roll" name="roll_perskill" value="&{template:blue} {{name=@{perckillname}}} {{Roll=[[(@{perckilldice} -@{WoundMod} +@{Force_Up} + ?{Dice mods|0} -1)d6cf0cs7 + @{perckillpip} + ?{Other Mods(pip)|0} + 1d6!cf1cs6]]}}"></button>
							<button class="d6-dice gmroll gmroll-hide"  type="roll" name="rollg_perskill" value="/w gm &{template:blue} {{name=@{perckillname}}} {{Roll=[[(@{perckilldice} -@{WoundMod} +@{Force_Up} + ?{Dice mods|0} -1)d6cf0cs7 + @{perckillpip} + ?{Other Mods(pip)|0} + 1d6!cf1cs6]]}}"><span class="redtxt">GM</span></button>
							  <input class="skilltext" type="text" name="attr_perckillname"/> <!-- Misspelled attr name iis to be left as it is, otherwise it wipes char sheets from perseption skills-->
							  <div class="right">
								<input type="number" name="attr_perckilldice" class="smallnumber shortnumber" min="1" value="3"/>D+<input type="number" name="attr_perckillpip" class="pipnumber shortnumber" min="0" max="2" value="0"/> 
							  </div>
						</fieldset>
					</td>
					<td class="tdborder"><div class="bold"><!---Str Attribute --->
							<button class="d6-dice" type='roll' name="roll_str" value='&{template:blue} {{name=Strength}} {{Roll=[[(@{strength} -@{WoundMod} +@{Force_Up} + ?{Dice mods|0} -1)d6cf0cs7 + @{strengthpip} + ?{Other Mods(pip)|0} + 1d6!cf1cs6]]}}' >Strength</button>
							<button class="d6-dice gmroll gmroll-hide" type='roll' name="rollg_str"value='/w gm &{template:blue} {{name=Strength}} {{Roll=[[(@{strength} -@{WoundMod} +@{Force_Up} + ?{Dice mods|0} -1)d6cf0cs7 + @{strengthpip} + ?{Other Mods(pip)|0} + 1d6!cf1cs6]]}}'><span class="redtxt">GM</span></button>
							<div style="float:right;">
								<input type="number" name="attr_strength" class="smallnumber" min="1" value="3"/>D+<input type="number" name="attr_strengthpip" class="pipnumber" min="0" max="2" value="0"/>  
							</div>
						</div>
						<fieldset class="repeating_strskills"> <!---Str Skills --->
							<button class="d6-dice" type="roll" name="roll_strskill" value="&{template:blue} {{name=@{strskillname}}} {{Roll=[[(@{strskilldice} -@{WoundMod} +@{Force_Up} + ?{Dice mods|0} -1)d6cf0cs7 + @{strskillpip} + ?{Other Mods(pip)|0} + 1d6!cf1cs6]]}}"></button>
							<button class="d6-dice gmroll gmroll-hide" type="roll" name="rollg_strskill" value="/w gm &{template:blue} {{name=@{strskillname}}} {{Roll=[[(@{strskilldice} -@{WoundMod} +@{Force_Up} + ?{Dice mods|0} -1)d6cf0cs7 + @{strskillpip} + ?{Other Mods(pip)|0} + 1d6!cf1cs6]]}}"><span class="redtxt">GM</span></button>
							  <input class="skilltext" type="text" name="attr_strskillname"/> 
							  <div class="right">
								<input type="number" name="attr_strskilldice" class="smallnumber shortnumber" min="1" value="3"/>D+<input type="number" name="attr_strskillpip" class="pipnumber shortnumber" min="0" max="2" value="0"/> 
							  </div>
						</fieldset>			
					</td> 
					<td class="tdborder"><div class="bold"><!---Tech Attribute --->
							<button class="d6-dice" type='roll' name="roll_tech" value='&{template:blue} {{name=Technical}} {{Roll=[[(@{technical} -@{WoundMod} +@{Force_Up} + ?{Dice mods|0} -1)d6cf0cs7 + @{technicalpip} + ?{Other Mods(pip)|0} + 1d6!cf1cs6]]}}' >Technical</button>
							<button class="d6-dice gmroll gmroll-hide" type='roll' name="rollg_tech" value='/w gm &{template:blue} {{name=Technical}} {{Roll=[[(@{technical} -@{WoundMod} +@{Force_Up} + ?{Dice mods|0} -1)d6cf0cs7 + @{technicalpip} + ?{Other Mods(pip)|0} + 1d6!cf1cs6]]}}'><span class="redtxt">GM</span></button>
							<div style="float:right;">
								<input type="number" name="attr_technical" class="smallnumber" min="1" value="3"/>D+<input type="number" name="attr_technicalpip" class="pipnumber" min="0" max="2" value="0"/>    
							</div>
						</div>
						<fieldset class="repeating_techskills">  <!---Tech Skills --->
							<button class="d6-dice"  type="roll" name="roll_techskill" value="&{template:blue} {{name=@{techskillname}}} {{Roll=[[(@{techskilldice} -@{WoundMod} +@{Force_Up} + ?{Dice mods|0} -1)d6cf0cs7 + @{techskillpip} + ?{Other Mods(pip)|0} + 1d6!cf1cs6]]}}"></button>
							<button class="d6-dice gmroll gmroll-hide"  type="roll" name="rollg_techskill" value="/w gm &{template:blue} {{name=@{techskillname}}} {{Roll=[[(@{techskilldice} -@{WoundMod} +@{Force_Up} + ?{Dice mods|0} -1)d6cf0cs7 + @{techskillpip} + ?{Other Mods(pip)|0} + 1d6!cf1cs6]]}}"><span class="redtxt">GM</span></button>
							  <input class="skilltext" type="text" name="attr_techskillname"/> 
							  <div class="right">
								<input type="number" name="attr_techskilldice" class="smallnumber shortnumber" min="1" value="3"/>D+<input type="number" name="attr_techskillpip" class="pipnumber shortnumber" min="0" max="2" value="0"/> 
							  </div>
						</fieldset>
					</td> 
				</tr>
				<tr>
					<td class="tdborder"><div class="bold"> <!---Dex Attribute --->
							<button class="d6-dice" type='roll' name="roll_dex" value='&{template:blue} {{name=Dexterity}} {{Roll=[[(@{dexterity} -@{WoundMod} +@{Force_Up} + ?{Dice mods|0} -1)d6cf0cs7 + @{dexteritypip} + ?{Other Mods(pip)|0} + 1d6!cf1cs6]]}}' >Dexterity</button>
							<button class="d6-dice gmroll gmroll-hide" type='roll' name="rollg_dex" value='/w gm &{template:blue} {{name=Dexterity}} {{Roll=[[(@{dexterity} -@{WoundMod} +@{Force_Up} + ?{Dice mods|0} -1)d6cf0cs7 + @{dexteritypip} + ?{Other Mods(pip)|0} + 1d6!cf1cs6]]}}'><span class="redtxt">GM</span></button>
							<div style="float:right;">
								<input type="number" name="attr_dexterity" class="smallnumber" min="1" value="3"/>D+<input type="number" name="attr_dexteritypip" class="pipnumber" min="0" max="2" value="0"/>
							</div>
						</div>
						<fieldset class="repeating_dexskills"> <!---Dex Skills --->
							<button class="d6-dice"  type="roll" name="roll_dexskill" value="&{template:blue} {{name=@{dexskillname}}} {{Roll=[[(@{dexskilldice} -@{WoundMod} +@{Force_Up} + ?{Dice mods|0} -1)d6cf0cs7 + @{dexskillpip} + ?{Other Mods(pip)|0} + 1d6!cf1cs6]]}}"></button>
							<button class="d6-dice gmroll gmroll-hide" name="rollg_dexskill" type="roll" value="/w gm &{template:blue} {{name=@{dexskillname}}} {{Roll=[[(@{dexskilldice} -@{WoundMod} +@{Force_Up} + ?{Dice mods|0} -1)d6cf0cs7 + @{dexskillpip} + ?{Other Mods(pip)|0} + 1d6!cf1cs6]]}}"><span class="redtxt">GM</span></button>
							  <input class="skilltext" type="text" name="attr_dexskillname"/>
							  <div class="right">		
								<input type="number" name="attr_dexskilldice" class="smallnumber shortnumber" min="1" value="3"/>D+<input type="number" name="attr_dexskillpip" class="pipnumber shortnumber" min="0" max="2" value="0"/>
							  </div>
						</fieldset>
					</td>
					<td class="tdborder"><div class="bold"> <!---Know Attribute ---> 
							<button class="d6-dice" type='roll' name="roll_know" value='&{template:blue} {{name=Knowledge}} {{Roll=[[(@{knowledge} -@{WoundMod} +@{Force_Up} + ?{Dice mods|0} -1)d6cf0cs7 + @{knowledgepip} + ?{Other Mods(pip)|0} + 1d6!cf1cs6]]}}' >Knowledge</button>
							<button class="d6-dice gmroll gmroll-hide" type='roll' name="rollg_know" value='/w gm &{template:blue} {{name=Knowledge}} {{Roll=[[(@{knowledge} -@{WoundMod} +@{Force_Up} + ?{Dice mods|0} -1)d6cf0cs7 + @{knowledgepip} + ?{Other Mods(pip)|0} + 1d6!cf1cs6]]}}'><span class="redtxt">GM</span></button>
							<div style="float:right;">
								<input type="number" name="attr_knowledge" class="smallnumber" min="1" value="3"/>D+<input type="number" name="attr_knowledgepip" class="pipnumber" min="0" max="2" value="0"/>
							</div>
						</div>
						<fieldset class="repeating_knowskills">  <!---Know Skills --->
							<button class="d6-dice"  type="roll" name="roll_knowskill" value="&{template:blue} {{name=@{knowskillname}}} {{Roll=[[(@{knowskilldice} -@{WoundMod} +@{Force_Up} + ?{Dice mods|0} -1)d6cf0cs7 + @{knowskillpip} + ?{Other Mods(pip)|0} + 1d6!cf1cs6]]}}"></button>
							<button class="d6-dice gmroll gmroll-hide" name="rollg_knowskill" type="roll" value="/w gm &{template:blue} {{name=@{knowskillname}}} {{Roll=[[(@{knowskilldice} -@{WoundMod} +@{Force_Up} + ?{Dice mods|0} -1)d6cf0cs7 + @{knowskillpip} + ?{Other Mods(pip)|0} + 1d6!cf1cs6]]}}"><span class="redtxt">GM</span></button>
							<input class="skilltext" type="text" name="attr_knowskillname"/> 
							<div class="right">
								<input type="number" name="attr_knowskilldice" class="smallnumber shortnumber" min="1" value="3"/>D+<input type="number" name="attr_knowskillpip" class="pipnumber shortnumber" min="0" max="2" value="0"/> 
							</div>
						</fieldset>
					</td> 
					<td class="tdborder"><div class="bold"><!---Mech Attribute --->
							<button class="d6-dice"  type='roll' name="roll_mech" value='&{template:blue} {{name=Mechanical}} {{Roll=[[(@{mechanical} -@{WoundMod} +@{Force_Up} + ?{Dice mods|0} -1)d6cf0cs7 + @{mechanicalpip} + ?{Other Mods(pip)|0} + 1d6!cf1cs6]]}}'>Mechanical</button>
							<button class="d6-dice gmroll gmroll-hide"  type='roll' name="rollg_mech" value='/w gm &{template:blue} {{name=Mechanical}} {{Roll=[[(@{mechanical} -@{WoundMod} +@{Force_Up} + ?{Dice mods|0} -1)d6cf0cs7 + @{mechanicalpip} + ?{Other Mods(pip)|0} + 1d6!cf1cs6]]}}' ><span class="redtxt">GM</span></button>
							<div style="float:right;">
								<input type="number" name="attr_mechanical" class="smallnumber" min="1" value="3"/>D+<input type="number" name="attr_mechanicalpip" class="pipnumber" min="0" max="2" value="0"/>
							</div>
						</div>
						<fieldset class="repeating_mechskills">  <!---Mech Skills --->      
							<button class="d6-dice"  type="roll" name="roll_mechskill" value="&{template:blue} {{name=@{mechskillname}}} {{Roll=[[(@{mechskilldice} -@{WoundMod} +@{Force_Up} + ?{Dice mods|0} -1)d6cf0cs7 + @{mechskillpip} + ?{Other Mods(pip)|0} + 1d6!cf1cs6]]}}"></button>
							<button class="d6-dice gmroll gmroll-hide"  type="roll" name="rollg_mechskill" value="/w gm &{template:blue} {{name=@{mechskillname}}} {{Roll=[[(@{mechskilldice} -@{WoundMod} +@{Force_Up} + ?{Dice mods|0} -1)d6cf0cs7 + @{mechskillpip} + ?{Other Mods(pip)|0} + 1d6!cf1cs6]]}}"><span class="redtxt">GM</span></button>
							<input class="skilltext" type="text" name="attr_mechskillname"/> 
							<div class="right">
								<input type="number" name="attr_mechskilldice" class="smallnumber shortnumber" min="1" value="3"/>D+<input type="number" name="attr_mechskillpip" class="pipnumber shortnumber" min="0" max="2" value="0"/> 
							</div>
						</fieldset>
					</td> 
				</tr>
			</table>    
		</div>	
		<div class="section"> <!------------------------------------ Weapons & Armor-->
			<label style="text-align: center">Weapon & Armor</label>
			<table>
				<tr>
					<td style="width:210px"><label>Weapon</label></td>
					<td style="width:70px">Skill Roll</td>
					<td style="width:72px">Damage</td>
					<td style="width:45px">Short</td>
					<td style="width:50px">Med</td>
					<td style="width:45px">Long</td>
					<td style="width:35px">ROF</td>
					<td style="width:30px;text-align:center;">Ammo</td>
				</tr>
			</table>	
				<fieldset class="repeating_weapons">
					<input class="skilltext" type="text"  style="width:200px" name="attr_weapon"/>
					<input type="number" name="attr_weaponskill" class="smallnumber" min="1" value="1"/>D+<input type="number" name="attr_weaponskillpip" class="pipnumber" min="0" max="2" value="0"/>
					<input type="number" name="attr_damagedice" class="smallnumber shortnumber" min="1" value="1"/>D+<input type="number" name="attr_damagepip" class="pipnumber shortnumber" min="0" max="2" value="0"/>
					<input class="smallnumber shortnumber" type="number" name="attr_shortrange"/>
					<input class="mediumnumber shortnumber" type="number" name="attr_medrange"/>
					<input class="mediumnumber shortnumber" type="number" name="attr_longrange"/>
					<input class="smallnumber shortnumber" type="number" name="attr_ROF"/>
					<input class="mediumnumber shortnumber" type="number" name="attr_Ammo"/>

					<button class="d6-dice" name="roll_attack" type="roll" value="&{template:red} {{name=@{weapon}}} {{Roll=[[(@{weaponskill} -@{WoundMod} +@{Force_Up} + ?{Dice mods|0} -1)d6cf0cs0 + @{weaponskillpip} + ?{Other Mods(pip)|0} + 1d6!cf1cs6]]}}">Atk</button>				
					<button class="d6-dice" name="roll_dmg" type="roll" value="&{template:red} {{name=@{weapon} damage}} {{Roll=[[(@{damagedice}- 1)d6cf0cs7 + @{damagepip} + (1d6!cf1cs6)]]}}">Dmg</button>
					<button class="d6-dice gmroll gmroll-hide" name="rollg_attack" type="roll" value="/w gm &{template:red} {{name=@{weapon}}} {{Roll=[[(@{weaponskill} -@{WoundMod} +@{Force_Up} + ?{Dice mods|0} -1)d6cf0cs0 + @{weaponskillpip} + ?{Other Mods(pip)|0} + 1d6!cf1cs6]]}}"><span class="redtxt">GM</span>Atk</button>				
					<button class="d6-dice gmroll gmroll-hide" name="rollg_dmg" type="roll" value="/w gm &{template:red} {{name=@{weapon} damage}} {{Roll=[[(@{damagedice}- 1)d6cf0cs7 + @{damagepip} + (1d6!cf1cs6)]]}}"><span class="redtxt">GM</span>Dmg</button>
				</fieldset>
			<table>
				<tr>
					<td style="width:200px"><label>Armor</label></td>
					<td style="width:80px">Physical</td>
					<td style="width:80px">Energy</td>
					<td style="width:180px">Other</td>
					<td style="width:180px">Damage Soak Rolls</td>
				</tr>
			</table>
				<fieldset class="repeating_armors">
					<input class="skilltext" type="text"  style="width:200px" name="attr_armorname"/>
					<input type="number" name="attr_armorPhDice" class="smallnumber shortnumber" min="0" value="1"/>D+<input type="number" name="attr_armorPhPip" class="pipnumber shortnumber" min="0" max="2" value="0"/>
					<input type="number" name="attr_armorEnDice" class="smallnumber shortnumber" min="0" value="1"/>D+<input type="number" name="attr_armorEnPip" class="pipnumber shortnumber" min="0" max="2" value="0"/>
					<input class="skilltext" type="text" name="attr_armor_other"/>
					<button class="d6-dice" name="roll_dmg_soak_en" type="roll" value="&{template:red} {{name=Damage Soak(Physical)}} {{Roll=[[(@{strength} +@{armorPhDice} -@{WoundMod} -1)d6cf0cs0 +@{armorPhPip} +1d6!cf1cs6]]}}">Physical</button>
					<button class="d6-dice" name="roll_dmg_soak_ph" type="roll" value="&{template:red} {{name=Damage Soak(Energy)}} {{Roll=[[(@{strength} +@{armorEnDice} -@{WoundMod} -1)d6cf0cs0 +@{armorEnPip} +1d6!cf1cs6]]}}">Energy</button>
					<button class="d6-dice" name="roll_dmg_soak_str" type="roll" value="&{template:red} {{name=Damage Soak(Strength only)}} {{Roll=[[(@{strength} -@{WoundMod} -1)d6cf0cs7 +1d6!cf1cs6]]}}">Str only</button>	  
					<button class="d6-dice gmroll gmroll-hide" name="rollg_dmg_soak_en" type="roll" value="/w gm &{template:red} {{name=Damage Soak(Physical)}} {{Roll=[[(@{strength} +@{armorPhDice} -@{WoundMod} -1)d6cf0cs0 + @{armorPhPip} + 1d6!cf1cs6]]}}"><span class="redtxt">GM</span>P</button>
					<button class="d6-dice gmroll gmroll-hide" name="rollg_dmg_soak_ph" type="roll" value="/w gm &{template:red} {{name=Damage Soak(Energy)}} {{Roll=[[(@{strength} +@{armorEnDice} -@{WoundMod} -1)d6cf0cs0 + @{armorEnPip} + 1d6!cf1cs6]]}}"><span class="redtxt">GM</span>E</button>
					<button class="d6-dice gmroll gmroll-hide" name="rollg_dmg_soak_str" type="roll" value="/w gm &{template:red} {{name=Damage Soak(Strength only)}} {{Roll=[[(@{strength} -@{WoundMod} -1)d6cf0cs0 + 1d6!cf1cs6]]}}"><span class="redtxt">GM</span>S</button>	  
				</fieldset>
		</div>
		<div class="section force-hide"> <!--------------------------- Force -->
			<label style="text-align: center">Force Section</label>
			<div class='3colrow'>
				<div class='col'>
					<table style="width:270px"><th><label>Force Skills</label></th>
						<tr><!--Control -->
							<td class="tdborder">
								<div class="bold">
									<button class="d6-dice forcebutton" name="roll_force_control" type='roll' value='&{template:default} {{name=Force:Control}} {{Roll=[[(@{control} -@{WoundMod} +@{Force_Up} +?{Dice mods|0} -1)d6cf0cs0 +@{controlpip} +@{Force_EmptinessMod} +?{Other Mods(pip)|0} +1d6!cf1cs6]]}}'>Control</button>
									<button class="d6-dice gmroll gmroll-hide" name="rollg_force_control" type='roll' value='/w gm &{template:default} {{name=Force:Control}} {{Roll=[[(@{control} -@{WoundMod} +@{Force_Up} +?{Dice mods|0} -1)d6cf0cs0 +@{controlpip} +@{Force_EmptinessMod} +?{Other Mods(pip)|0} +1d6!cf1cs6]]}}'><span class="redtxt">GM</span></button>
									<div class="bold" style="float:right;">
										<input type="number" name="attr_control" class="smallnumber"  min="0" value="0"/>D+<input type="number" name="attr_controlpip" class="pipnumber" min="0" max="2" value="0"/>
									</div>
								</div>
								<fieldset class="repeating_controlpowers">  <!---Control Powers --->      
									<button class="d6-dice" name="roll_force_control_p" type="roll" value="&{template:default} {{name=@{controlpowername} (Control)}} {{Roll=[[(@{control} -@{WoundMod} +@{Force_Up} +?{Dice mods|0} -1)d6cf0cs0 +@{controlpip} +@{Force_EmptinessMod} +?{Other Mods(pip)|0} +1d6!cf1cs6]]}}"></button>
									<button class="d6-dice gmroll gmroll-hide" name="rollg_force_control_p" type="roll" value="/w gm &{template:default} {{name=@{controlpowername} (Control)}} {{Roll=[[(@{control} -@{WoundMod} +@{Force_Up} +?{Dice mods|0} -1)d6cf0cs0 +@{controlpip} +@{Force_EmptinessMod} +?{Other Mods(pip)|0} +1d6!cf1cs6]]}}"><span class="redtxt">GM</span></button>
									<input class="skilltext" type="text" name="attr_controlpowername"/> 
								</fieldset>								
							</td>
						</tr>
						<tr><!-- Sense -->
							<td class="tdborder">
								<div class="bold">
									<button class="d6-dice forcebutton" name="roll_force_sense" type='roll' value='&{template:default} {{name=Force:Sense}} {{Roll=[[(@{sense} -@{WoundMod} +@{Force_Up} +?{Dice mods|0} -1)d6cf0cs0 +@{sensepip} +@{Force_EmptinessMod} +?{Other Mods(pip)|0} +1d6!cf1cs6]]}}'>Sense</button>
									<button class="d6-dice gmroll gmroll-hide" name="rollg_force_sense" type='roll' value='/w gm &{template:default} {{name=Force:Sense}} {{Roll=[[(@{sense} -@{WoundMod} +@{Force_Up} +?{Dice mods|0} -1)d6cf0cs0 +@{sensepip} +@{Force_EmptinessMod} +?{Other Mods(pip)|0} +1d6!cf1cs6]]}}'><span class="redtxt">GM</span></button>
									<div class="bold" style="float:right;">
										<input type="number" name="attr_sense" class="smallnumber" style="margin-left=100px;"  min="0" value="0"/>D+<input type="number" name="attr_sensepip" class="pipnumber" min="0" max="2" value="0"/>  
									</div>
								</div>
								<fieldset class="repeating_sensepowers">  <!---Sense Powers --->      
									<button class="d6-dice" name="roll_force_sense_p" type="roll" value="&{template:default} {{name=@{sensepowername} (Sense)}} {{Roll=[[(@{sense} -@{WoundMod} +@{Force_Up} +?{Dice mods|0} -1)d6cf0cs0 +@{sensepip} +@{Force_EmptinessMod} +?{Other Mods(pip)|0} +1d6!cf1cs6]]}}"></button>
									<button class="d6-dice gmroll gmroll-hide" name="rollg_force_sense_p"  type="roll" value="/w gm &{template:default} {{name=@{sensepowername} (Sense)}} {{Roll=[[(@{sense} -@{WoundMod} +@{Force_Up} +?{Dice mods|0} -1)d6cf0cs0 +@{sensepip} +@{Force_EmptinessMod} +?{Other Mods(pip)|0} +1d6!cf1cs6]]}}"><span class="redtxt">GM</span></button>
									<input class="skilltext" type="text" name="attr_sensepowername"/> 
								</fieldset>
							</td> 
						</tr>
						<tr><!-- Alter -->
							<td class="tdborder">
								<div class="bold">
									<button class="d6-dice forcebutton" name="roll_force_alter" type='roll' value='&{template:default} {{name=Force:Alter}} {{Roll=[[(@{alter} -@{WoundMod} +@{Force_Up} +?{Dice mods|0} -1)d6cf0cs0 +@{alterpip} +@{Force_EmptinessMod} +?{Other Mods(pip)|0} +1d6!cf1cs6]]}}'>Alter</button>
									<button class="d6-dice gmroll gmroll-hide" name="rollg_force_alter"  type='roll' value='/w gm &{template:default} {{name=Force:Alter}} {{Roll=[[(@{alter} -@{WoundMod} +@{Force_Up} +?{Dice mods|0} -1)d6cf0cs0 +@{alterpip} +@{Force_EmptinessMod} +?{Other Mods(pip)|0} +1d6!cf1cs6]]}}'><span class="redtxt">GM</span></button>
									<div class="bold" style="float:right;">
										<input type="number" name="attr_alter" class="smallnumber" min="0" value="0"/>D+<input type="number" name="attr_alterpip" class="pipnumber" min="0" max="2" value="0"/>    
									</div>
								</div>
								<fieldset class="repeating_alterpowers">  <!---Alter Powers --->      
									<button class="d6-dice"  type="roll" name="roll_force_alter_p" value="&{template:default} {{name=@{alterpowername} (Alter)}} {{Roll=[[(@{alter} -@{WoundMod} +@{Force_Up} +?{Dice mods|0} -1)d6cf0cs0 + @{alterpip} +@{Force_EmptinessMod} +?{Other Mods(pip)|0} +1d6!cf1cs6]]}}"></button>
									<button class="d6-dice gmroll gmroll-hide" name="rollg_force_alter_p"  type="roll" value="/w gm &{template:default} {{name=@{alterpowername} (Alter)}} {{Roll=[[(@{alter} -@{WoundMod} +@{Force_Up} +?{Dice mods|0} -1)d6cf0cs0 +@{alterpip} +@{Force_EmptinessMod} +?{Other Mods(pip)|0} +1d6!cf1cs6]]}}"><span class="redtxt">GM</span></button>
									<input class="skilltext" type="text" name="attr_alterpowername"/> 
								</fieldset>
							</td> 
						</tr>
					</table>		
				</div>
				<div class='col'><!-- Force Power Trackers -->
					<table style="position:relative;left:30px"><th><label>Force Powers Active</label></th>		
						<tr><td><!---Force Emptiness --->
								<span style="padding-top:8px; padding-bottom:12px;" title="Force Emptiness adds +6 pips to all force skill rolls when active. Bonus is reduced by 1 for every DSP">Force Emptiness active</span><!---Force Emptiness adds +6 pips to all force skill rolls when active --->
									<select name="attr_Force_Emptiness" class="smallselect">
									  <option value="false" selected="selected">No</option>
									  <option value="true">Yes</option>
									</select>
						</td></tr>
						<tr><td><!---Force Powers active --->
							<span>Resist Pain active<!---Reduces Wound penalties to -1. Doesn't need to be counted on the tracker below --->
								<select name="attr_PainResist" class="smallselect" title="Reduces Wound penalties to -1. Doesn't need to be counted on the tracker below">
								  <option value="false" selected="selected">No</option>
								  <option value="true">Yes</option>
								</select>
							</span>
						</td></tr>
						<tr><td><!---Force Powers active --->
							<span># of other powers active<!---gives penalty to all rolls thanks to concentration/distraction --->
								<select name="attr_Force_Up" class="smallselect" title="The number of power active is subtracted from all roll as a Multiple Action Penalty. Above Force Pain doesn't need to be added">
								  <option value="0" selected="selected">0</option>
								  <option value="-1">1</option>
								  <option value="-2">2</option>
								  <option value="-3">3</option>
								  <option value="-4">4</option>
								  <option value="-5">5</option>
								</select>
							</span>
						</td></tr>
					</table>	
				</div>
				<div class='col'><!-- Force Power list -->
						<label style="padding-top:8px; padding-bottom:12px;" >Force Powers</label>
						<textarea name="attr_forcePowers" style="width:95%;height:24em"></textarea>
				</div>
			</div>
			<br>
			<br>
			<div class='col'>
					<span style="padding-top:8px; padding-bottom:12px;" >Lightsaber Combat
						<input class="skilltext" type="text" name="attr_lightsaberskill" value="lightsaber"/>
						<input type="number" name="attr_lightsaberskilldice" class="smallnumber shortnumber" min="1" value="3"/>D+<input type="number" name="attr_lightsaberskillpip" class="pipnumber shortnumber" min="0" max="2" value="0"/>
						<button class="d6-dice" name="roll_lc_attack" type="roll" value="&{template:default} {{name=@{lightsaberskill}}} {{Roll=[[(@{lightsaberskilldice} -@{WoundMod} +@{Force_Up} +@{sense} +?{Dice mods|0} -1)d6cf0cs0 + @{lightsaberskillpip} +@{Force_EmptinessMod} +@{sensepip} +?{Other Mods(pip)|0} +(1d6!cf1cs6)]]}}">LC Attack</button>	
						<input type="number" name="attr_lightsaberdamagedice" class="smallnumber shortnumber" min="1" value="6"/>D+<input type="number" name="attr_lightsaberdamagepip" class="pipnumber shortnumber" min="0" max="2" value="0"/>
						<button class="d6-dice" name="roll_lc_dmg" type="roll" value="&{template:default} {{name=@{lightsaberskill} damage}} {{Roll=[[(@{lightsaberdamagedice}- 1)d6cf0cs0 +@{lightsaberdamagepip} +@{Force_EmptinessMod} +(1d6!cf1cs6)]]}}">LC Damage</button>
					</span>		
			</div>
		</div>
		<div class="section equipment-hide npc-hide"> <!-- Equipment PC-->
				<label style="text-align: center;">Equipment</label>
				<table style="width:97%">
					<tr>
						<td style="text-align: right;">
							<textarea name="attr_geartext1"></textarea>
							<textarea name="attr_geartext2"></textarea>
						</td>
						<td style="text-align: center;">
							<textarea name="attr_geartext3"></textarea>
							<textarea name="attr_geartext4"></textarea>
						</td>
						<td style="text-align: Left;">
							<textarea name="attr_geartext5"></textarea>
							<textarea name="attr_geartext6"></textarea>
						</td>
					</tr>
				</table>
		</div>
		<div class="section equipment-hide pc-hide" ><!-- Equipment NPC-->
				<label style="text-align: center">Equipment</label>
				<textarea style="height:7em;width:96%" name="attr_geartext1"></textarea>
		</div>
		<div class="section background-hide"> <!---------Background & extended info -->
			<label style="text-align: center">Background and extended info</label>
			<table>
				<tr>
					<td style="width:33.33%;"><label>Background</label>
						<div>
							<textarea name="attr_background"></textarea>
						</div>
					</td>
					<td style="width:33.33%;">
						<label>Personality</label>
						<div>
							<textarea name="attr_personality"></textarea>
						</div>
					</td>
					<td style="width:33.33%;">
						<label>Objectives</label>
						<div>
							<textarea name="attr_objectives"></textarea>
						</div>
					</td>
				</tr>
				<tr>
					<td>
						<label>Quotes</label>
						<div>
							<textarea name="attr_quotes"></textarea>
						</div>
					</td>
					<td>
						<label>Connections to other characters</label>
						<div>
							<textarea name="attr_connections"></textarea>
						</div>
					</td>
					<td>
						<label>Additional Notes</label>
						<div>
							<textarea name="attr_notes"></textarea>
						</div>
					</td>
				</tr>
			</table>
		</div>
		<div class="section"> <!-- -------------------------------Ship&Vehicle section-->
			<div class='2colrow'>
				<div class='col'><!-- Vehicle -->
						<label style="padding-top:4px;padding-bottom:4px;" >Vehicle</label>
						<input class="skilltext" type="text"  style="width:95%;padding-bottom:8px;" name="attr_vehiclename"/>
						<textarea name="attr_vehicle" style="width:97%;height:17em;"></textarea>				
				</div>
				<div class='col'><!-- Starship -->
						<label style="padding-top:4px;padding-bottom:4px;" >Starship</label>
						<input class="skilltext" type="text"  style="width:95%;padding-bottom:8px;" name="attr_starshipname"/>
						<textarea name="attr_starship" style="width:97%;height:17em;"></textarea>				
				</div>
			</div>
		</div>
	<div class="section" style="text-align: Center; padding-top:10px;"> <!-- footer-->
			<p class="version" style="text-align: center;"><small>Original Author: Timothy O'Driscoll | Main Editor: Andreas J. (Roll20user: 1223200) | </small></p>
	</div>
	</div>
</div>
<!-- -------------------------------Hidden Values----------------@{WoundLevel} +@{Pain}------------------------------->
<input type="hidden" name="attr_Force_EmptinessMod" value="0">
<input type="hidden" name="attr_WoundMod" value="0">

<!-------------------------------- ROLL TEMPLATES --------------------->
<rolltemplate class="sheet-rolltemplate-blue">
<table>
    <caption>{{name}}</caption>
    {{#allprops() }}
       <tr><td>{{key}}</td><td>{{value}}</td>
    {{/allprops() }}
</table>
</rolltemplate>

<rolltemplate class="sheet-rolltemplate-green">
<table>
    <caption>{{name}}</caption>
    {{#allprops() }}
       <tr><td>{{key}}</td><td>{{value}}</td>
    {{/allprops() }}
</table>
</rolltemplate>

<rolltemplate class="sheet-rolltemplate-red">
<table>
    <caption>{{name}}</caption>
    {{#allprops() }}
       <tr><td>{{key}}</td><td>{{value}}</td>
    {{/allprops() }}
</table>
</rolltemplate>

<rolltemplate class="sheet-rolltemplate-black">
<table>
    <caption>{{name}}</caption>
    {{#allprops() }}
       <tr><td>{{key}}</td><td>{{value}}</td>
    {{/allprops() }}
</table>
</rolltemplate>

<!----------------------------- Sheet workers --------------------------->
<script type="text/worker">
on("change:painresist change:woundlevel", function() {
   getAttrs(["WoundLevel", "PainResist","WoundMod"], function(values) {
	if(values.WoundLevel == "0"){
		var update = {};
		update.WoundMod = "0";
		setAttrs(update);
	}
	else if(values.WoundLevel == "1"){
		var update = {};
		update.WoundMod = "1";
		setAttrs(update);
	}
	else if(values.WoundLevel == "2"){
		if(values.PainResist == "false"){
			var update = {};
			update.WoundMod = "2";
			setAttrs(update);
		}
		if(values.PainResist == "true"){
			var update = {};
			update.WoundMod = "1";
			setAttrs(update);
		}
	}
	else if(values.WoundLevel == "5"){
		if(values.PainResist == "true"){
			var update = {};
			update.WoundMod = "1";
			setAttrs(update);
		}
		if(values.PainResist == "false"){
			var update = {};
			update.WoundMod = "5";
			setAttrs(update);
		}
	}
   });
});

on("change:force_emptiness change:darksidepoints", function() {
   getAttrs(["Force_Emptiness","darkSidePoints"], function(values) {
		let v_Force_Emptiness = values.Force_Emptiness;
		let v_Force_EmptinessMod = 0;
		let v_darkSidePoints = parseInt(values.darkSidePoints)||0;
		
		if(v_Force_Emptiness == "true"){
			v_Force_EmptinessMod = 6 - v_darkSidePoints;
		}
		setAttrs({
			Force_EmptinessMod:v_Force_EmptinessMod
		});
   });
});
</script>